This document explains how the project was tested. Please see full [README.md file](https://github.com/Alicja-Malinowska/ColourPerfect-e-commerce/blob/master/README.md).

# Automated testing

## Validators

* [W3 HTML validator](https://validator.w3.org/) was used on all the html files. Since the templating language was used in the html files, and the W3 HTML validators does not recognise them, I used page source code instead. I made sure to get the source code in all the possible states of the webpage (e.g. product with colours vs without colours, message displayed, product on homepage marked to be on wishlist etc.). A few errors were caught this way: nested a tags, unclosed p elements and repeated id's. These mistakes were corrected and now the HTML code validates without errors. 

* [W3 CSS validator](https://jigsaw.w3.org/css-validator/) was used to check all the CSS files. No errors were found. 

## Unit tests

There is a total of 69 unit tests and they all pass. 

Additional, complementary manual test were conducted for each app and described in 'Manual testing' part of this document. 

### About us app

The coverage for the about us app is 86%. All the python files written by me within the about us app have 100% coverage.

#### Views

Features tested:

* correct template is rendered for about us view
* delivery view takes user to the delivery section of the about page

### Basket app

The coverage for the basket app is 96%. All the python files written by me within the basket app have 100% coverage except for the views.py file with 89% coverage.

The code that is not covered is validation for colour and quantity. The not covered validation is only needed if the user interacts with the website skipping its frontend, for example puts invalid colour (not hex) in the post request. However, with frontend this is impossible because the user chooses from displayed colours and, since it's a POST request, this is not sent via URL. For these reasons I thought testing this part was redundant. 


#### Models

Features tested:

* basket created correctly
* basket item created correctly
* basket item deleted if basket object being its foreign key is deleted

#### Views

Features tested:

* basket page rendered with correct template
* adding product with and without colours
* adding product as an authenticated and not authenticated user
* basket created for an authenticated user when adding item
* basket retrieved for an authenticated user when adding item and basket object for the user already existed
* adding product that already exists in the basket (increasing quantity) for both authenticated and not authenticated user
* redirecting to wishlist add view if 'Add to wishlist' button was clicked
* error message if user attempts to add a product that has colours without choosing a colour
* adjusting quantity in the basket as an authenticated and not authenticated user
* redirecting back to basket if the adjusted quantity is the same as the one already saved in the database
* deleting an item from the basket as an authenticated and not authenticated user
* raising 404 if the item being deleted does not exist (if it was typed as URL), as an authenticated and not authenticated user



### Beauty test app

The coverage for the beauty test app is 94%. All the python files written by me within the beauty test app have 100% coverage.

#### Views

Features tested:

* correct templates are rendered for test questions and results
* form is not submitted if not all the questions are answered
* correct result is computed based on the user's answers
* result view returns a list of suggested products



### Checkout app

The coverage for the checkout app is 99%. All the python files written by me within the checkout app have 100% coverage.

#### Models

Features tested:

* create an order object with autogenerated number (uuid) and autogenerated date and default total of 0
* order string method returns order number as a string
* create an order item with correctly assigned order, product and colour

#### Forms

Features tested:

* form is valid if all the required fields are filled
* form is not valid and returns an error if not all the required fields are filled

#### Views

* correct templates are rendered for checkout and checkout success views
* checkout view returns stripe details
* error message is displayed if the submitted form is not valid
* if authenticated or not authenticated user's basket is empty, stay in the basket view
* order saved in the database with together with basket total
* delivery details saved in profile object in the database if user checked the 'save' box
* on checkout success profile object is added to order object, so that order history can be retrieved
* on checkout success all the basket items are deleted if the user is authenticated, and if not - basket is deleted from session



### Home app

The coverage for the home app is 94%. All the python files written by me within the home app have 100% coverage.

#### Views

Features tested:

* correct template rendered for home view
* home view returns 3 products for each season, with matching colours



### Products app

The coverage for the products app is 99%. All the python files written by me within the product app have 100% coverage.

#### Models

Features tested:

* create a category, brand, colour and product object
* create a product object with correct many to many fields and foreign keys
* brand and category 'get_display_name' methods return the display name

#### Views

Features tested:

* correct template is rendered for product view
* product colours are correctly sorted according to the seasons they belong to
* correct template is rendered for search view
* correct product objects returned when searched by category or brand
* message error displayed if category or does not exists (in case it was written in the URL instead of clicking a link)
* correct products returned for searched phrase (searching in names and descriptions)
* if search phrase is an empty string (or spaces) a message appears informing user they should type a search phrase first
* products tuples in search results that contain item that is in the wishlist, contain True as the second value, and those not on wishlist - False



### Profiles app

The coverage for the profiles app is 98%. All the python files written by me within the profile app have 100% coverage.

#### Models

Features tested:

* profile is created when user object is created

#### Forms

Features tested:

* form is valid when created with all the mandatory fields
* if form is empty an error message appears

#### Views

Features tested:

* user is redirected to login page if tries to access the profile page without being authenticated
* correct template rendered for profile view
* delivery details are saved in the database correctly on update
* correct template rendered for orders history view
* orders query set passed in the context by order history view
* error message displayed if form is not valid

### Wishlist app

The coverage for the wishlist app is 98%. All the python files written by me within the wishlist app have 100% coverage.

#### Models

Features tested:

* created wishlist item object has correct wishlist. product and colour foreign keys
* when wishlist is deleted, wishlist items belonging to it are deleted as well

#### Views

Features tested:

* user is redirected to login page if tries to access the wishlist page without being authenticated
* correct template rendered for wishlist view
* new wishlist item added correctly to the database
* if wishlist item exists already - message informing about it is displayed
* item correctly deleted from wishlist 
* 404 raised if an item that doesn't exists is attempted to be deleted

# Manual testing

## Features testing

Manual testing is complementary to the unit tests. 

### Login&Authentication system

Django Allauth was used to implement login and authentication functionality. Unit tests were not conducted on this part, as the code must have been tested before releasing the application set. Instead, this functionality was tested manually to ensure that everything works as expected in this project.

* **Registration**

  **Tests*

  * Submit registration form without completing it, omitting some required fields, or typing incorrect email (e.g. without '@')
  * Submit registration form with existing username or email address
  * Submit valid registration form
  * Click verification link in the account confirmation email

  **Results*

  * If required data is missing or it's incorrect, form does not submit and displays an error informing user what went wrong
  * If the username or email address exists in the database, the form does not submit and a message informing about it is displayed, similarly - if the passwords do not match
  * On submission of the valid form, user is informed that they need to verify their account and that email was sent to them with the verification link
  * On submission of the valid form, an email with verification link is sent
  * When verification link is clicked in the email, a confirmation page is displayed, and registration is complete when 'confirm' buttons is clicked; success message is displayed
  * User is automatically logged in when registration is successful

* **Login**

  **Tests*

  * Try to login with incorrect password and/or inexistent login
  * Try to login with empty form
  * Try to login with correct login and password
  * Click 'Forgot password' link
  * Sign in with Google

  **Results*

  * An error message appears if typed credentials are not correct or missing
  * If correct login and password are given, user is logged in, redirected to the homepage (or a page they tried to access and required user to be authenticated), and a success messaged appears
  * When 'Forgot password' link is clicked, a user is taken to the password reset page and asked for their email address, next an email is sent with a link to reset password
  * After typing new password twice, the password is changed and user can login with new password
  * If user is logged in their Google account and wants to sign in with Google, they are logged in as soon as they click the button, otherwise, they are taken to the Google login screen when they have to login and then they are redirected back to the ColourPerfect page

  * **Logout**

  **Tests*

  * Click logout link

  **Results*

  * When logout link is clicked, a modal appears informing about the email address the user is currently logged in and asking for confirmation to log out, if it is confirmed - the user is logged out


### Fixed Navbar


* All the links in the navbar work properly and take a user where it was intended
* The navbar is collapsed on mobile devices and the side bar shows when the hamburger menu is clicked
* When scrolling down the navbar is visible for user all the time
* When an item is added to the basket, a badge with basket total appears, the total updates every time new item is added or and item is deleted from the basket
* If user us not authenticated the links in the profile drop-down are for login and registration, and if user is authenticated - account view and logout
* When search box is clicked on mobile view, it gets wider
  
### Footer

* Delivery&Returns link takes a user to the Delivery section of the About us page
* Customer service number link dials the number
* Social links work and take a user to the social pages

### About us app

* Collapsed divs expand when clicked
* Brands and categories displayed in alphabetical order
* 'Take the test' buttons takes user to the beauty test questions page
* Contact links work properly

### Basket app

* If the basket is empty, a message appears informing user about it
* When an item is added to the basket, a message appears informing what was added, and contents of basket are displayed in a pop-up, together with checkout button
* If an item that is already in the basket is added again, a message says how many more items were added
* When item quantity is updated in the basket or item is deleted, a message appears informing about it and showing basket contents
* When product name is clicked, user is taken to the product's page

### Beauty test app

* All questions are correctly rendered in the template
* Correct image and description are rendered for user's result
* 12 random colours matching the season result are rendered
* 3 random suggested products are rendered together with colours matching the result season
* A hear icon appears in the top right corner of a product if it is on user's wishlist
* If the product image link is broken, a default image (saying that the product image is currently unavailable) is rendered instead


### Checkout 

* If the details were previously saved in the profile, the order form is pre-filled with them
* If test card number is entered (4242 4242 4242 4242) and a date in the future, the payment succeeds (this was checked on Stripe Dashbord -> Developers -> Events)
* 'See your basket' button takes user back to their basket
* User is informed if invalid card number, expiration date or post code were entered
* A success message informing that payment was successful and confirmation email was sent, appears when the payment was made, order created and user redirected to the success page
* Confirmation email is sent with order details
* Order number and link to order history is displayed on success page for authenticated user
* If user is not authenticated and checks out as a guest, login and registration links appear below order form (instead of 'save details' checkbox) and later, on the success page (instead of the link to order history)


### Home app

* Suggested products are random and change after every refresh
* If suggested product is on user's wishlist, a heart icon is displayed in the top right corner
* All categories and brands are displayed in alphabetical order
* When suggested product is clicked, user is taken to the product's page
* When category name or brand name is clicked, user is taken to the search view with all the products in the category or by the brand are displayed

### Products app

* If product image is broken, a replacement image appears with the shop's logo and information that the image is currently unavailable
* When a product on search page is clicked, the product page opens
* If there are no matching products for the typed search phrase, information 'no products found' appears
* Product brand and product categories are displayed as buttons on product page, and when clicked - take a user to the search page for the category/brand
* Product colours are radio buttons and when selected and submitted, correct colour is passed
* Product quantity input is set to one, the + and - button allow to increase and decrease amount only in range 1-99, user cannot type in the input
* 'Add to basket' and 'Add to wishlist' buttons work properly and trigger expected views

### Profiles app

* Recent orders displayed on the profile page, after clicking on each, they expand and show order details
* 'Full order history' button takes a user to the order history page
* 'Change password' button takes a user to change password page or set password page (this comes form django allauth)
* Username and email address are displayed on the profile page
* If a user has no order history, an information about it is displayed

### Wishlist app

* If there are no items on the user's wishlist, an information about it is displayed on the page
* If an item is added to the wishlist or deleted from it, a message confirming this appears
* Items displayed on the wishlist are clickable links and take user to the product's page
* If an item was added to the wishlist with a colour, the colour is displayed in the bottom right corner

## Browser support

* The website was tested and works properly on: Chrome v77, Chrome v77 on Android, Opera v63, Firefox and Edge
* There are some issues on IE11. Homepage does not render properly. Some elements overlap and the footer is not at the bottom of the page. Cards height is longer than expected. Also, the questions on the beauty test page are squeezed to the middle. I tried to use autoprefixer on the css files, however it did not help and the issue persists. I tried to look for the root problem, however I could not find it. I suspect that there might be some Bootstrap classes that do not work as expected with IE, however IE inspect functions do not allow for in-depth analysis (unlike Chrome Dev tools). For this reason, and also because IE is no longer recommended to use, I decided not to investigate further, as it would bring little value. 

## Responsive design

* The website was tested using Google Chrome Developer Tools to check how it looks like in case of different width and height by choosing 'Responsive' option and resizing the window. Using Chrome Dev Tools, it was also tested how the website looks on: Galaxy S5, Pixel 2, Pixel 2XL, iPhone 5/6/7/8/X, iPad and iPad Pro. In all these views the website is responsive and shows content properly.
* The website was also tested on the following devices: Samsung Galaxy A3, Asus laptop 15", Dell laptop 13.3", a 24" monitor. On all of this devices the website is responsive and shows content properly. 
* On mobiles and tablets the navbar collapses into a 'hamburger menu' and can be expanded to reveal the items by clicking/touching it, on desktop it contains the visible list of all the items
* Items on all pages align in the way that use the optimal space and are big/small enough to create a good user experience, regardless a device used


